{% extends "public/layout/base.html" %}
{% load static %}
{% load frontend_custom_filters %}
{% load humanize %}
{% block header %}
<link href="{% static 'css/custom-styles.css' %}" rel="stylesheet">
<style>
    /* Base Styles */
    body {
        font-family: 'Roboto', sans-serif;
        background-color: #f5f5f5;
        color: #333;
        overflow-x: hidden;
    }

    h1, h2, h3, h4, h5, h6 {
        font-family: 'Playfair Display', serif;
    }

    /* Hero Section */
    .hero-section {
        padding: 6rem 0 3rem;
        background: linear-gradient(180deg, #ffffff 0%, #f5f5f5 100%);
    }

    .hero-title {
        font-size: 3.8rem;
        font-weight: 700;
        margin-bottom: 2.5rem;
        color: #222;
    }

    .car-image-container {
        /* border:2px solid black; */
        margin: 2.5rem 0;
        text-align: center;
        transition: transform 0.3s ease;
    }

    .car-image-container img {

        width: 100%;
        max-width: 900px; /* Consistent max width */
        height: 400px; /* Fixed height for uniformity */
        object-fit: cover ; /* Ensures images fit without distortion */
        object-position: 0% 35%;
    }
    /* Description Cards */
    .description-section {
        padding: 4rem 0;
    }

    .description-card {
        max-width: 850px;
        margin: auto;
        background-color: #ffffff;
        border-radius: 16px;
        padding: 3rem;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .description-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    .description-card h2 {
        font-size: 1.7rem;
        line-height: 1.5;
        font-weight: 400;
        color: #333;
    }

    /* Logo Styling */
    .shoreline-text {
        font-size: 2.7rem;
        font-weight: 400;
        letter-spacing: 2.5px;
        color: #222;
    }

    .lm-text {
        font-style: italic;
        font-weight: 700;
    }

    .coupe-text {
        font-style: italic;
        font-weight: 400;
    }

    .lm-inline {
        font-style: italic;
    }

    /* Divider */
    .divider {
        display: inline-block;
        margin: 0 1rem;
        color: #777;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .hero-title {
            font-size: 2.8rem;
        }
        
        .car-image-container img {
            height: 300px; /* Smaller height for tablets */
            max-width: 100%;
        }

        .description-card {
            padding: 2rem;
        }
        
        .description-card h2 {
            font-size: 1.5rem;
        }
        
        .shoreline-text {
            font-size: 2.2rem;
        }
    }

    @media (max-width: 576px) {
        .hero-title {
            font-size: 2.2rem;
        }
        
        .car-image-container img {
            height: 200px; /* Smaller height for mobile */
            max-width: 100%;
        }

        .description-card {
            padding: 1.5rem;
        }
        
        .description-card h2 {
            font-size: 1.3rem;
        }
        
        .shoreline-text {
            font-size: 1.8rem;
        }
    }

    .shadow {
        box-shadow: none !important;
    }

    .offcanvas.offcanvas-end, .offcanvas.offcanvas-start {
        width: 420px !important;
    }

    /* Gallery Item Styling */
    .gallery-item {
        margin-bottom: 24px;
        transition: all 0.4s cubic-bezier(0.165, 0.84, 0, 1);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    .gallery-item:hover {
        transform: translateY(-8px);
        box-shadow: 0 16px 30px rgba(0, 0, 0, 0.15);
    }

    .gallery-img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        transition: all 0.5s ease;
        display: block;
        border-radius: 12px;
    }

    .gallery-item-container {
        position: relative;
        width: 100%;
        height: 250px;
        overflow: hidden;
        border-radius: 12px;
    }

    .gallery-item:hover .gallery-img {
        transform: scale(1.01);
    }

    .card-body {
        display: none;
    }

    .card {
        border: none;
        background: none;
        box-shadow: none;
    }

    .modal-content {
        border-radius: 16px;
        overflow: hidden;
        border: none;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
    }

    .modal-header {
        background-color: #212529;
        color: white;
        border-bottom: none;
        padding: 16px 24px;
    }

    .modal-img {
        width: 100%;
        height:100%;
        object-fit: contain;
        background-color: #000; /* Black background for better contrast */
        display: block;
    }

    .modal-footer {
        padding: 16px 24px;
        border-top: 1px solid rgba(0, 0, 0, 0.05);
        background-color: #212529;
        color: white;
    }

    .modal-fullscreen .modal-content {
        border-radius: 0;
        background-color: #000; /* Dark background for full-screen modal */
    }

    .modal-fullscreen .modal-header {
        background-color: rgba(0, 0, 0, 0.8); /* Semi-transparent for visibility */
    }

    .modal-fullscreen .modal-footer {
        background-color: rgba(0, 0, 0, 0.8);
    }

    .loading {
        opacity: 0;
        transform: translateY(15px);
        transition: opacity 0.4s ease, transform 0.5s ease;
    }

    .loaded {
        opacity: 1;
        transform: translateY(0);
    }

    .nav-tabs {
        border-bottom: 2px solid #f1f3f5;
        margin-bottom: 36px;
    }

    .nav-tabs .nav-link {
        margin-bottom: -2px;
        border: none;
        color: #6c757d;
        font-weight: 600;
        padding: 14px 24px;
        border-radius: 0;
        transition: all 0.3s ease;
    }

    .nav-tabs .nav-link:hover {
        border-color: transparent;
        color: #495057;
    }

    .nav-tabs .nav-link.active {
        color: #0d6efd;
        background-color: transparent;
        border-bottom: 3px solid #0d6efd;
    }

    .tab-content {
        padding-top: 10px;
    }

    .tab-pane {
        transition: all 0.3s ease;
    }

    .badge-tab {
        margin-left: 8px;
        background-color: #e9ecef;
        color: #6c757d;
        font-weight: 500;
        font-size: 0.75rem;
        padding: 5px 8px;
    }

    .nav-link.active .badge-tab {
        background-color: #0d6efd;
        color: white;
    }

    .tab-icon {
        margin-right: 8px;
    }

    @media (max-width: 768px) {
        .gallery-img,
        .gallery-item-container {
            height: 200px;
        }
        .nav-tabs .nav-link {
            padding: 16px 4px;
        }
        .modal-img {
            height: calc(100vh - 100px); /* Adjust for smaller screens */
        }
    }

    @media (max-width: 576px) {
        .gallery-img,
        .gallery-item-container {
            height: 150px;
        }
        .modal-img {
            height: calc(100vh - 80px); /* Further adjust for mobile */
        }
    }

    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        padding: 20px 0;
    }

    @media (max-width: 768px) {
        .gallery-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    .gallery-grid-item {
        position: relative;
        overflow: hidden;
        border-radius: 8px;
        aspect-ratio: 1 / 1;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .gallery-grid-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .gallery-grid-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }
    /* Add these styles to your existing CSS */
#imageModal .modal-content {
    width:100%;
    height:100%;
    background-color: rgba(0, 0, 0, 0.9);
    border: none;
}

#imageModal .modal-header {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
    border: none;
}

#imageModal .modal-footer {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    border: none;
    background: transparent;
}

#imageModal .btn-close {
    filter: invert(1);
    opacity: 0.8;
    transition: opacity 0.2s;
}

#imageModal .btn-close:hover {
    opacity: 1;
}

#modalImage {
    transition: transform 0.3s;
    cursor: zoom-in;
}

#modalImage.zoomed {
    transform: scale(1.5);
    cursor: zoom-out;
}
</style>
{% endblock header %}

{% block content %}
<div class="container-fluid p-0">
    <!-- Hero Section -->
    <section class="hero-section">
        <div style="max-width: 800px; margin: auto; display: flex; justify-content: space-between; align-items: center; padding-top: 10px;">
            <a href="#exclusive-discount" class="btn btn-danger text-white fw-bold btn-sm text-uppercase">
                Get Exclusive Discount
            </a>
            <a href="" data-bs-toggle="modal" data-bs-target="#fullscreenModal" class="btn btn-danger text-white fw-bold btn-sm text-uppercase">
                Technical Specs
            </a>
        </div>
        
        <div class="container">
            <h1 class="hero-title text-center mb-5 mt-5">{{TitleData.heading}}</h1>
            <div class="car-image-container">
                <img src="{{ Images.0.url }}" alt="Red Shoreline LM Coupe" class="img-fluid">
            </div>
            <div class="logo-container text-center mt-4">
                <h2 class="shoreline-text">{{TitleData.subheading}}</h2>
            </div>
        </div>
    </section>

    <!-- First Description Section -->
    <section class="description-section">
        <div class="container">
            <div class="description-card">
                <h2 class="text-center">
                    {{CardData.0.details}}
                </h2>
            </div>
        </div>
    </section>

    <!-- Second Car Image Section -->
    <section class="car-section">
        <div class="container">
            <div class="car-image-container">
                <img src="{{ Images.1.url }}" alt="Silver Shoreline LM Coupe" class="img-fluid">
            </div>
        </div>
    </section>

    <!-- Second Description Section -->
    <section class="description-section">
        <div class="container">
            <div class="description-card">
                <h2 class="text-center">
                    {{CardData.1.details}}
                </h2>
            </div>
        </div>
    </section>

    <!-- Third Car Image Section -->
    <section class="car-section">
        <div class="container">
            <div class="car-image-container">
                <img src="{{ Images.2.url }}" alt="Green Shoreline LM Coupe" class="img-fluid">
            </div>
        </div>
    </section>

    <!-- Third Description Section -->
    <section class="description-section">
        <div class="container">
            <div class="description-card">
                <h2 class="text-center">
                    {{CardData.2.details}}
                </h2>
            </div>
        </div>
    </section>

    <!-- Interior Image Section -->
    <section class="car-section">
        <div class="container">
            <div class="car-image-container">
                <img src="{{ Images.3.url }}" alt="Interior of Shoreline LM Coupe" class="img-fluid">
            </div>
        </div>
    </section>

    <!-- Fourth Description Section -->
    <section class="description-section">
        <div class="container">
            <div class="description-card">
                <h2 class="text-center">
                    {{CardData.3.details}}
                </h2>
            </div>
        </div>
    </section>

    <!-- Comparison Image Section -->
    <section class="car-section">
        <div class="container">
            <div class="car-image-container">
                <img src="{{ Images.4.url }}" alt="Comparison of chassis and completed car" class="img-fluid">
            </div>
        </div>
    </section>

    <!-- Fifth Description Section -->
    <section class="description-section mb-5">
        <div class="container">
            <div class="description-card">
                <h2 class="text-center">
                    {{CardData.4.details}}
                </h2>
            </div>
        </div>
    </section>

     <!-- Comparison Image Section -->
     <section class="car-section">
        <div class="container">
            <div class="car-image-container">
                <img src="{{ Images.5.url }}" alt="Comparison of chassis and completed car" class="img-fluid">
            </div>
        </div>
    </section>

    <!-- Sixth Description Section -->
    <section class="description-section mb-5">
        <div class="container">
            <div class="description-card">
                <h2 class="text-center">
                    {{CardData.5.details}}
                </h2>
            </div>
        </div>
    </section>

     <!-- Comparison Image Section -->
     <section class="car-section">
        <div class="container">
            <div class="car-image-container">
                <img src="{{ Images.6.url }}" alt="Comparison of chassis and completed car" class="img-fluid">
            </div>
        </div>
    </section>

    <!-- Seventh Description Section -->
    <section class="description-section mb-5">
        <div class="container">
            <div class="description-card">
                <h2 class="text-center">
                    {{CardData.6.details}}
                </h2>
            </div>
        </div>
    </section>


     <!-- Comparison Image Section -->
     <section class="car-section">
        <div class="container">
            <div class="car-image-container">
                <img src="{{ Images.7.url }}" alt="Comparison of chassis and completed car" class="img-fluid">
            </div>
        </div>
    </section>

    <!-- Tenth Description Section -->
    <section class="description-section mb-5">
        <div class="container">
            <div class="description-card">
                <h2 class="text-center">
                    {{CardData.7.details}}
                </h2>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <div class="container">
        <ul class="nav nav-tabs" id="galleryTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="body-tab" data-bs-toggle="tab" data-bs-target="#body-pane" type="button" role="tab" aria-controls="body-pane" aria-selected="true">
                    <i class="fas fa-car tab-icon"></i>Body
                    <span class="badge rounded-pill badge-tab" id="body-count">0</span>
                </button>
            </li>

            <li class="nav-item" role="presentation">
                <button class="nav-link " id="body-tab" data-bs-toggle="tab" data-bs-target="#intermediate-pane" type="button" role="tab" aria-controls="intermediate-pane" aria-selected="true">
                    <i class="fas fa-car tab-icon"></i>Intemediate
                    <span class="badge rounded-pill badge-tab" id="intermediate-count">0</span>
                </button>
            </li>
           
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="chassis-tab" data-bs-toggle="tab" data-bs-target="#chassis-pane" type="button" role="tab" aria-controls="chassis-pane" aria-selected="false">
                    <i class="fas fa-cogs tab-icon"></i>Chassis
                    <span class="badge rounded-pill badge-tab" id="chassis-count">0</span>
                </button>
            </li>
        </ul>
        
        <div class="tab-content" id="galleryTabContent">
            <div class="tab-pane fade show active" id="body-pane" role="tabpanel" aria-labelledby="body-tab">
                <div class="gallery-grid" id="body-container"></div>
            </div>
           
            <div class="tab-pane fade" id="chassis-pane" role="tabpanel" aria-labelledby="chassis-tab">
                <div class="gallery-grid" id="chassis-container"></div>
            </div>

            <div class="tab-pane fade" id="intermediate-pane" role="tabpanel" aria-labelledby="intermediate-tab">
                <div class="gallery-grid" id="intermediate-container"></div>
            </div>
        </div>
    </div>

    <!-- Full-Screen Image Modal -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel">Image Title</h5>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">X</button>
                </div>
                <div class="modal-body p-0">
                    <img src="/placeholder.svg" alt="Gallery Image" class="modal-img" id="modalImage">
                </div>
                {% comment %} <div class="modal-footer">
                    <span class="badge bg-danger me-auto" id="modalCategory">Category</span>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div> {% endcomment %}
            </div>
        </div>
    </div>

    <section id="exclusive-discount" class="bg-half-100 d-table w-100">
        {% include "public/LockPriceSection.html" %}
    </section>

    <!-- Technical Specs Modal -->
    <div class="modal fade" id="fullscreenModal" tabindex="-1" aria-labelledby="fullscreenModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header" style="background-color: ghostwhite; border-bottom: rgb(70, 70, 74); padding-left: 40px; padding-right: 40px;">
                    <h1 class="modal-title text-dark text-uppercase" id="fullscreenModalLabel">
                        {{ items.title }}
                    </h1>
                    <button type="button" class="btn-close btn btn-icon btn-outline-danger float-end" data-bs-dismiss="modal" aria-label="Close"><i class="mdi mdi-close"></i></button>
                </div>
                <div class="modal-body bg-white" style="padding-right: 40px; padding-left: 40px;">
                    <div class="row">
                        <div class="col-md-6 text-dark">
                            <div class="col-md-12">
                                <h1 class="text-dark mt-4">Technical Specs</h1>
                                <div class="accordion" id="accordionExample">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="headingDimension">
                                            <button class="accordion-button collapsed text-uppercase" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDimension" aria-expanded="false" aria-controls="collapseDimension">
                                                Dimensions
                                            </button>
                                        </h2>
                                        <div id="collapseDimension" class="accordion-collapse collapse" aria-labelledby="headingDimension" data-bs-parent="#accordionExample">
                                            <div class="accordion-body bg-white text-dark">
                                                <p>- Height: 40.5"</p>
                                                {% if items.title == 'Mark I' %}
                                                    <p>- Length: 163"</p>
                                                    <p>- Width: 71" (Intermediate rear) or 78" (Wide rear) or 80" (Extra Wide rear)</p>
                                                {% elif items.title == 'Mark II' %}
                                                    <p>- Length: 163"</p>
                                                    <p>- Width: 71"</p>
                                                {% elif items.title == 'Mark IV' %}
                                                    <p>- Length: 171"</p>
                                                    <p>- Width: 70.5"</p>
                                                {% endif %}
                                                <p>- Wheelbase: 95"</p>
                                                <p>- Front Wheels: Options Available</p>
                                                <p>- Rear Wheels: Options Available</p>
                                                <p>- Front Tires: Options Available</p>
                                                <p>- Rear Tires: Options Available</p>
                                                <p>- Fuel Tank: Aluminum 22 Gallons</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="heading2">
                                            <button class="accordion-button collapsed text-uppercase" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
                                                Body
                                            </button>
                                        </h2>
                                        <div id="collapse2" class="accordion-collapse collapse" aria-labelledby="heading2" data-bs-parent="#accordionExample">
                                            <div class="accordion-body bg-white text-dark">
                                                <p>- Vacuum Infused / Handlaid Fiber Glass or Carbon Fiber</p>
                                                <p>- Fiber Glass / Carbon Fiber Roof</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="heading3">
                                            <button class="accordion-button collapsed text-uppercase" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
                                                Chassis
                                            </button>
                                        </h2>
                                        <div id="collapse3" class="accordion-collapse collapse" aria-labelledby="heading3" data-bs-parent="#accordionExample">
                                            <div class="accordion-body bg-white text-dark">
                                                <p>- Mig/Tig-welded Tubular Chassis bespoke designed for GEN-Z40</p>
                                                <p>- Aluminum Skinned</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="heading4">
                                            <button class="accordion-button collapsed text-uppercase" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4" aria-expanded="false" aria-controls="collapse4">
                                                Suspension
                                            </button>
                                        </h2>
                                        <div id="collapse4" class="accordion-collapse collapse" aria-labelledby="heading4" data-bs-parent="#accordionExample">
                                            <div class="accordion-body bg-white text-dark">
                                                <p>- Front: Ford Production upper control Arm and Spindle, CNC produced lower control arm, adjustable coilover shocks</p>
                                                <p>- Rear: CNC produced uprights and control arm, adjustable coilover shocks</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="heading5">
                                            <button class="accordion-button collapsed text-uppercase" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
                                                Steering
                                            </button>
                                        </h2>
                                        <div id="collapse5" class="accordion-collapse collapse" aria-labelledby="heading5" data-bs-parent="#accordionExample">
                                            <div class="accordion-body bg-white text-dark">
                                                <p>- Rack and pinion with Collapsible Steering Column</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="heading6">
                                            <button class="accordion-button collapsed text-uppercase" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6" aria-expanded="false" aria-controls="collapse6">
                                                Brakes
                                            </button>
                                        </h2>
                                        <div id="collapse6" class="accordion-collapse collapse" aria-labelledby="heading6" data-bs-parent="#accordionExample">
                                            <div class="accordion-body bg-white text-dark">
                                                <p>- Front: Brembo / Wilwood</p>
                                                <p>- Rear: Brembo / Wilwood</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="heading9">
                                            <button class="accordion-button collapsed text-uppercase" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9" aria-expanded="false" aria-controls="collapse9">
                                                Interior
                                            </button>
                                        </h2>
                                        <div id="collapse9" class="accordion-collapse collapse" aria-labelledby="heading9" data-bs-parent="#accordionExample">
                                            <div class="accordion-body bg-white text-dark">
                                                <p>- Original Style Dash (Left Hand Drive / Right Hand Drive) - Leather Stitched / Carbon Fiber / Alcantara</p>
                                                <p>- Moto-lita 14" Steering Wheel</p>
                                                <p>- Original style Seats with Leather or Alcantara</p>
                                                <p>- Speed Hut Gauges</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="heading7">
                                            <button class="accordion-button collapsed text-uppercase" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7" aria-expanded="false" aria-controls="collapse7">
                                                Drivetrain
                                            </button>
                                        </h2>
                                        <div id="collapse7" class="accordion-collapse collapse" aria-labelledby="heading7" data-bs-parent="#accordionExample">
                                            <div class="accordion-body bg-white text-dark">
                                                <p>- Recommended Engines: 289, 302, 351W, 427 or Coyote</p>
                                                <p>- Transmission: Boxter S (up to 04) or Audi 01E/01X</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="heading8">
                                            <button class="accordion-button collapsed text-uppercase" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8" aria-expanded="false" aria-controls="collapse8">
                                                Exhaust System
                                            </button>
                                        </h2>
                                        <div id="collapse8" class="accordion-collapse collapse" aria-labelledby="heading8" data-bs-parent="#accordionExample">
                                            <div class="accordion-body bg-white text-dark">
                                                <p>- Bundle of Snakes</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 d-grid">
                                <small class="text-dark text-sm mb-5 mt-3" style="font-size: 11px;">
                                    * Reservation today will save your spot and lock your price for either Package "Roller or Turnkey Minus"
                                </small>
                            </div>
                        </div>
                        <div class="pt-2 col-md-6 mb-5">
                            {% if items.title == 'Mark I' %}
                                <img src="{% static 'images/genz/mark1wided.jpg' %}" class="img-fluid rounded shadow mb-5" alt="">
                            {% elif items.title == 'Mark II' %}
                                <img src="{% static 'images/genz/mark2wided.jpg' %}" class="img-fluid rounded shadow mb-5" alt="">
                            {% elif items.title == 'Mark IV' %}
                                <img src="{% static 'mk4.jpg' %}" class="img-fluid rounded shadow mb-5" alt="">
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Full-Screen Image Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content bg-black">
            <div class="modal-header border-0">
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body d-flex align-items-center justify-content-center p-0">
                <img src="" alt="Full Screen Image" class="img-fluid" id="modalImage" style="max-height: 100vh; object-fit: contain;">
            </div>
            <div class="modal-footer border-0 justify-content-center bg-black">
                <span class="badge bg-light text-dark" id="modalCategory"></span>
            </div>
        </div>
    </div>
</div>

{{ GalleryImages|json_script:"gallery-images" }}

{% endblock content %}
{% block script %}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const images = JSON.parse(document.getElementById('gallery-images').textContent);
        initGallery(images);
        updateTabCounts(images);
        
        function addModalEvents() {
            document.querySelectorAll('.gallery-grid-item').forEach(item => {
                item.addEventListener('click', function() {
                    const img = this.querySelector('img');
                    const category = this.dataset.category;
                    
                    // Set modal content
                    document.getElementById('modalImage').src = img.src;
                    document.getElementById('modalCategory').textContent = 
                        capitalizeFirstLetter(category);
                    
                    // Show the modal
                    const modal = new bootstrap.Modal(document.getElementById('imageModal'));
                    modal.show();
                    
                    // Center the image in the modal
                    centerModalImage();
                });
            });
            
            // Handle window resize to keep image centered
            window.addEventListener('resize', centerModalImage);
        }
        
        function centerModalImage() {
            const modalImage = document.getElementById('modalImage');
            const modalBody = document.querySelector('#imageModal .modal-body');
            if (modalImage && modalBody) {
                const bodyHeight = modalBody.clientHeight;
                const imgHeight = modalImage.naturalHeight;
                
                if (imgHeight > bodyHeight) {
                    modalImage.style.maxHeight = '100vh';
                } else {
                    modalImage.style.maxHeight = 'none';
                }
            }
        }
        
        function initGallery(images) {
            document.getElementById('body-container').innerHTML = '';
            document.getElementById('chassis-container').innerHTML = '';
            document.getElementById('intermediate-container').innerHTML = '';
            
            images.forEach(image => {
                const galleryItem = createGalleryItem(image);
                document.getElementById(`${image.label}-container`).appendChild(galleryItem);
            });
            
            addModalEvents();
        }
        
        function createGalleryItem(image) {
            const item = document.createElement('div');
            item.className = 'gallery-grid-item';
            item.dataset.id = image.id;
            item.dataset.category = image.label;
            item.style.cursor = 'pointer'; // Add pointer cursor
            
            item.innerHTML = `
                <img src="${image.url}" class="gallery-grid-img" alt="${capitalizeFirstLetter(image.label)} Image" loading="lazy">
            `;
            
            return item;
        }
        
        function updateTabCounts(images) {
            const counts = {
                body: images.filter(img => img.label === 'body').length,
                intermediate: images.filter(img => img.label === 'intermediate').length,
                chassis: images.filter(img => img.label === 'chassis').length
            };
            console.log("Counts are", counts.body, counts.chassis,counts.intermediate)
            
            document.getElementById('body-count').textContent = counts.body;
            document.getElementById('chassis-count').textContent = counts.chassis;
            document.getElementById('intermediate-count').textContent = counts.intermediate;
            
        }
        
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
    });
</script>
{% endblock script %}